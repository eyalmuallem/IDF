<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>×”×—×–×¨×ª ×¦×™×•×“</title>
<style>
  body{font-family:Arial;direction:rtl;background:#f4f4f4;margin:0;padding:20px}
  .box{max-width:420px;background:#fff;margin:30px auto;padding:20px;border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,.12)}
  h2{margin:0 0 10px;text-align:center}
  label{display:block;margin-top:12px;font-weight:bold}
  input{width:100%;padding:12px;font-size:18px;border:1px solid #ccc;border-radius:8px;margin-top:6px}
  button{width:100%;padding:12px;font-size:18px;border:0;border-radius:10px;margin-top:14px;background:#16a34a;color:#fff;cursor:pointer}
  button:active{transform:scale(.99)}
  .msg{margin-top:14px;min-height:24px;text-align:center;font-size:16px}
  .ok{color:#16a34a}
  .err{color:#dc2626}
</style>
</head>
<body>
  <div class="box">
    <h2>ğŸ“¦ ×”×—×–×¨×ª ×¦×™×•×“</h2>

    <label>××¡×¤×¨ ××¡××š</label>
    <input id="doc" placeholder="EQ-1234" />

    <label>××™ ××—×–×™×¨ (××•×¤×¦×™×•× ×œ×™)</label>
    <input id="by" placeholder="×©× ××—×¡× ××™ / ××—×¡×Ÿ" />

    <button id="btn">âœ”ï¸ ×¡××Ÿ ×›×”×•×—×–×¨</button>

    <div id="msg" class="msg"></div>
  </div>

<script>
const API = "https://script.google.com/macros/s/AKfycbzWiBQ2OorLE5es5cqJ9FPN8sJC0m75r0_ky0BRBJfuQM0hPmXwDHk7m0uCRCkLFSWl/exec";

const docEl = document.getElementById("doc");
const byEl  = document.getElementById("by");
const msgEl = document.getElementById("msg");
const btn   = document.getElementById("btn");

function setMsg(text, cls) {
  msgEl.className = "msg " + (cls || "");
  msgEl.textContent = text;
}

function sendReturn() {
  const doc = docEl.value.trim();
  const by  = (byEl.value.trim() || "××—×¡×Ÿ");

  if (!doc) {
    setMsg("× × ×œ×”×–×™×Ÿ ××¡×¤×¨ ××¡××š", "err");
    docEl.focus();
    return;
  }

  btn.disabled = true;
  setMsg("×©×•×œ×— ×¢×“×›×•×Ÿâ€¦", "");

  // âœ… ×©×•×œ×—×™× ×‘-GET (Beacon) ×›×“×™ ×œ×¢×§×•×£ CORS
  const url =
  API +
  "?action=in" +
  "&doc=" + encodeURIComponent(doc) +
  "&by="  + encodeURIComponent(by) +
  "&_="   + Date.now();

  const img = new Image();
  img.onload = () => {
    setMsg("âœ”ï¸ ×¡×•××Ÿ ×›×”×•×—×–×¨: " + doc, "ok");
    docEl.value = "";
    btn.disabled = false;
    docEl.focus();
  };
 img.onerror = () => {
  setMsg("âœ”ï¸ ×¡×•××Ÿ ×›×”×•×—×–×¨ ×‘×”×¦×œ×—×”", "ok");
  btn.disabled = false;
};

  img.src = url;
}

btn.addEventListener("click", sendReturn);
docEl.addEventListener("keydown", (e) => { if (e.key === "Enter") sendReturn(); });
</script>
</body>
</html>
